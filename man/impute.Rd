% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/impute.R
\name{impute}
\alias{impute}
\alias{impute.random}
\alias{impute.condmean}
\title{Create Imputed Datasets}
\usage{
impute(draws, references, update_ice = NULL, strategies = getStrategies())

\method{impute}{random}(draws, references, update_ice = NULL, strategies = getStrategies())

\method{impute}{condmean}(draws, references, update_ice = NULL, strategies = getStrategies())
}
\arguments{
\item{draws}{A draws object created by \code{\link[=draws]{draws()}}.}

\item{references}{a named vector. Identifies the references to be used when generating the imputed
values. Should be of the form \code{c("Group" = "Reference", "Group" = "Reference")}.}

\item{update_ice}{an optional dataframe. Updates the imputation method that was originally set via
the \code{data_ice} option in \code{draws}. See the details section for more information.}

\item{strategies}{a named list of functions. Defines the imputation functions to be used. The names
of of the list should mirror the values specified in \code{method} column of \code{data_ice}.
Default = \code{getStrategies()}. See \code{\link[=getStrategies]{getStrategies()}} for more details.}
}
\description{
\code{impute} is used to create imputed datasets based upon the data and options specified in the
call to \code{\link[=draws]{draws()}}. One imputed dataset is created per \code{draw} "sample".
}
\details{
\code{impute} works by taking the model parameter estimates generated by \code{\link[=draws]{draws()}} and using them to calculate
the conditional distribution for the outcome for each subject separately. These distributions are then augmented
based upon the date of the ICE, the selected strategy and the chosen reference group. Each imputed dataset is
they constructed based upon the method as specified in the call to \code{\link[=draws]{draws()}} with 1 dataset being generated per
set of parameter estimates provided by \code{\link[=draws]{draws()}}.
\itemize{
\item Bayes & Approximate Bayes: Each imputed dataset consists of 1 row per subject & visit from the original
dataset with missing values imputed by taking a single random sample from the augmented outcome distribution.
\item Conditional Mean: Each imputed dataset consists of 1 row per subject & visit from the bootstrapped or jackknife
dataset that was used to generate the corresponding parameter estimates in \code{\link[=draws]{draws()}}.
Missing values are imputed by using the mean of the augmented outcome distribution.
}

For conditional mean and approximate Bayes the first imputed dataset will be the original dataset imputed
using the MLE parameter estimates of the
mmrm model fitted to the original dataset. See TODO (reference paper for methods) for full details.

\code{update_ice} can be used to update the imputation method that was originally set via
the \code{data_ice} option in \code{draws}.
The \code{update_ice} dataframe must contain two columns, one for the subject ID and another for the imputation method,
whose names are the same as
those defined in \code{vars} argument as specified in the call to \code{draws}.
You can only update the imputation method, that is to say that specifying
a visit column has no effect here. If you wish to change the ICE visit date you will need to re-run \code{draws}.
A key limitation is that you can only switch between a MAR and a non-MAR method (or vice versa)
if that subject has no non-missing post ICE data.
As an example, if a subject had their ICE on "Visit 2" but still had values in the dataset for
"Visit 3" then the function will throw and error if you try to switch them from MAR to a non-MAR method or
from a non-MAR method to MAR.
}
\examples{
\dontrun{

impute(
    draws = drawobj,
    references = c("Trt" = "Placebo", "Placebo" = "Placebo")
)

new_ice <- data.frame(
  subjid = c("Pt1", "Pt2"),
  method = c("MAR", "JR")
)

impute(
    draws = drawobj,
    references = c("Trt" = "Placebo", "Placebo" = "Placebo"),
    update_ice = new_ice
)
}

}
